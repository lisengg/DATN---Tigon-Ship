<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<title>TigonShip</title>
<meta name="description" content="Ela Admin - HTML5 Admin Template">
<meta name="viewport" content="width=device-width, initial-scale=1">
 <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
<link rel="apple-touch-icon" href="https://i.imgur.com/QRAUqs9.png">
<link rel="shortcut icon" href="https://i.imgur.com/QRAUqs9.png">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.0/normalize.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lykmapipo/themify-icons@0.1.2/css/themify-icons.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pixeden-stroke-7-icon@1.2.3/pe-icon-7-stroke/dist/pe-icon-7-stroke.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/3.2.0/css/flag-icon.min.css">
<link rel="stylesheet" th:href="@{/admin/css/cs-skin-elastic.css}">
<link rel="stylesheet" th:href="@{/admin/css/style.css}">
<link href='https://fonts.googleapis.com/css?family=Open+Sans:400,600,700,800' rel='stylesheet' type='text/css'>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"/> 	
<link rel="stylesheet" th:href="@{/css/style2.css}">
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.21.1/axios.min.js" type="text/javascript"></script>
</head>
<body>
	<!-- Left Panel (menu)-->
	<div th:replace="~{admin/fragments_admin :: aside}"></div>
	<!-- /Left-panel -->
	<!--  Header   --->
	<div id="right-panel" class="right-panel">
		<div th:replace="~{admin/fragments_admin :: header}"></div>
	</div>
	<!---------------->
	<div id="right-panel" class="right-panel">
		<div class="content">
			<div class="animated fadeIn">
				<div class="row">
					<div class="col-md-12">
						<div class="card">
							<div th:if="${ndungtbao}" class="alert hide">
							<div class="background"></div>
									<span class="fas fa-check-circle"></span> <span class="msg"
										th:text="${ndungtbao}"></span>
									<div class="close-btn">
										<span class="fas fa-times"></span>
									</div>
							</div>
							<div th:if="${ndungtbao1}" class="alert hide">
									<span class="fas fa-exclamation-circle"></span> <span class="msg1"
										th:text="${ndungtbao1}"></span>
									<div class="close-btn1">
										<span class="fas fa-times"></span>
									</div>
							</div>
							<div class="card-header">
								<h3>
									<strong class="card-title">HỒ SƠ CỦA TÔI</strong>
								</h3>
							</div>
							<div class="card-body">
							 <div class="container">  
							<form th:action="@{/admin/profile/form}" th:object="${user}"  method="post">
									<div class="row mb-3">
										<div class="col-md-4">
											<label class="form-label">Họ và tên:</label> 
											<input placeholder="Nhập họ và tên" th:value="${user.HOVATEN}"  name="hovaten" class="form-control">
										</div>
										<div class="col-md-4">
											<label class="form-label">Số điện thoại: </label> 								
											<input placeholder="Nhập số điện thoại" th:value="${user.SDT}" type="tel"  name="sdt"  class="form-control">
										</div>
										<div class="col-md-4">
											<label class="form-label">Số căn cước công dân :</label> <!-- pattern="/^(0[0-9][0-9][0-3][0-9]{8})$/" title="Số CCCD phải có 12 chữ số" --> 
											<input placeholder="Nhập số căn cước công dân" th:value="${user.CCCD}" name="cccd" class="form-control"> 
										</div>
									</div>
									<div class="row mb-3">
										<div class="col-md-4">
											<label class="form-label">Email:</label> 
											<input th:value="${user.EMAIL}" class="form-control" readonly>
										</div>
										<div class="col-md-4">
											<label class="form-label">Quyền:</label> 
											<input th:value="${user.QUYEN}"  class="form-control" readonly> 
										</div>
									</div>
									<div class="row mb-3">
										<label class="form-label" style="font-weight: 700;">Thông tin địa chỉ: </label>
										<div class="col-md-4">
											<label class="form-label">Tỉnh/Thành phố:</label> 
											<select class="form-select form-select-md mb-3" name="city" id="city">
												<option value="" selected></option>
											</select>
										</div>
										<div class="col-md-4">
											<label class="form-label">Quận/Huyện: </label> 
											<select class="form-select form-select-md mb-3" name="district" id="district">
												<option value="" selected></option>
											</select>
										</div>
										<div class="col-md-4">
											<label class="form-label">Phường/Xã:</label> 
											<select class="form-select form-select-mb mb-3" name="ward" id="ward">
												<option value="" selected></option>
											</select>
										</div>
									</div>
									<div class="row mb-3">
										<div class="col-md-4">
											<label class="form-label">Địa chỉ cụ thể:(Số nhà, hẻm, ấp,...)</label> 
											<input id="inputLocation" name="diachi" placeholder="Nhập địa chỉ cụ thể" class="form-control">
										</div>
										<div class="col-md-8">
											<label class="form-label">Địa chỉ:</label> 
											<input th:value="${user.DIACHI}"  class="form-control" readonly>
										</div>
									</div>
									<!-- Save changes button-->
									    <button style="text-align: right;" class="btn btn-primary">Cập nhật tài khoản</button>
								      </form>
								 </div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<!-- Footer-->
		<div th:replace="~{admin/fragments_admin :: footer}"></div>
		<!-- Footer -->
	</div>

<script>
    window.addEventListener("load", (event) => {
        $('.alert').addClass("show");
        $('.alert').removeClass("hide");
        $('.alert').addClass("showAlert");
        setTimeout(function () {
            $('.alert').removeClass("show");
            $('.alert').addClass("hide");
        }, 5000);
    });

    $('.close-btn').click(function () {
        $('.alert').removeClass("show");
        $('.alert').addClass("hide");
    });
    </script>

	<script>
        const host = "https://provinces.open-api.vn/api/";
        var callAPI = (api) => {
            return axios.get(api)
                .then((response) => {
                    renderData(response.data, "city");
                });
        }
        callAPI('https://provinces.open-api.vn/api/?depth=1');
        var callApiDistrict = (api) => {
            return axios.get(api)
                .then((response) => {
                    renderData(response.data.districts, "district");
                });
        }
        var callApiWard = (api) => {
            return axios.get(api)
                .then((response) => {
                    renderData(response.data.wards, "ward");
                });
        }

        var renderData = (array, select) => {
            let row = ' <option disable value="">Chọn</option>';
            array.forEach(element => {
                row += `<option data-id="${element.code}" value="${element.name}">${element.name}</option>`
            });
            document.querySelector("#" + select).innerHTML = row
        }

        $("#city").change(() => {
            callApiDistrict(host + "p/" + $("#city").find(':selected').data('id') + "?depth=2");
            printResult();
        });
        $("#district").change(() => {
            callApiWard(host + "d/" + $("#district").find(':selected').data('id') + "?depth=2");
            printResult();
        });
        $("#ward").change(() => {
            printResult();
        })

        var printResult = () => {
            if ($("#district").find(':selected').data('id') != "" && $("#city").find(':selected').data('id') != "" &&
                $("#ward").find(':selected').data('id') != "") {
                let result = $("#city option:selected").text() +
                    " | " + $("#district option:selected").text() + " | " +
                    $("#ward option:selected").text();
                $("#result").text(result)
            }

        }
    </script>
	<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js" integrity="sha384-oBqDVmMz9ATKxIep9tiCxS/Z9fNfEXiDAYTujMAeBAsjFuCZSmKbSSUnQlmh/jp3"crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.min.js" integrity="sha384-7VPbUDkoPSGFnVtYi0QogXtr74QeVeeIs99Qfg5YCF+TidwNdjvaKZX19NZ/e6oz" crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/jquery@2.2.4/dist/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.14.4/dist/umd/popper.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.3/dist/js/bootstrap.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/jquery-match-height@0.7.2/dist/jquery.matchHeight.min.js"></script>
	<script th:src="@{/admin/js/main.js}"></script>
</body>
</html>